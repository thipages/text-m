const e=["a","em","strong","small","s","cite","q","dfn","abbr","code","var","samp","kbd","sub","sup","i","b","u","mark","span"],t={a:[" ","href","target"],abbr:[,"title"],dfn:[,"title"]},n=/\x01(\d)/g,r=/\|([a-z][a-z0-9]*)(\.([^\[\/]*)){0,1}(\[(.*)\]){0,1}\/([^\/]+)\//gi,i={wrapOne:!0};
/*! (c) Andrea Giammarchi - ISC */
const s=(()=>{const e="DOMContentLoaded",t=new WeakMap,n=[],r=e=>{do{if(e.nextSibling)return!0}while(e=e.parentNode);return!1},i=()=>{n.splice(0).forEach((e=>{!0!==t.get(e[0])&&(t.set(e[0],!0),e[0][e[1]]())}))};document.addEventListener(e,i);class s extends HTMLElement{static withParsedCallback(s,a="parsed"){const{prototype:c}=s,{connectedCallback:o}=c,l=a+"Callback",u=(t,n,r,i)=>{n.disconnect(),r.removeEventListener(e,i),p(t)},p=e=>{n.length||requestAnimationFrame(i),n.push([e,l])};return Object.defineProperties(c,{connectedCallback:{configurable:!0,writable:!0,value(){if(o&&o.apply(this,arguments),l in this&&!t.has(this)){const n=this,{ownerDocument:i}=n;if(t.set(n,!1),"complete"===i.readyState||r(n))p(n);else{const t=()=>u(n,s,i,t);i.addEventListener(e,t);const s=new MutationObserver((()=>{r(n)&&u(n,s,i,t)}));s.observe(n.parentNode,{childList:!0,subtree:!0})}}}},[a]:{configurable:!0,get(){return!0===t.get(this)}}}),s}}return s.withParsedCallback(s)})();class a extends s{#e;#t;constructor(e){super(),this.#e=e||{}}#n(e,t){const n=this.#t;if(n)return e&&(this.#t=null),t?n.textContent:n}#r(e){e.hasAttribute("level-up")&&e.replaceWith(...e.children),e.dispatchEvent(new Event("load")),e.lodaed=!0}originalFragment(e=!0){return this.#n(e,!1)}originalText(e=!0){return this.#n(e,!0)}parsedCallback(){const e=()=>this.#r(this);this.#t=document.createDocumentFragment(),this.#t.append(...this.childNodes),this.innerHTML=this.#e.onLoadHtml||"",this.init?"AsyncFunction"===this.init.constructor.name?this.init().then(e):(this.init(),e()):e()}}const c={name:"text-m"};function o(e){const{name:t,render:n}=Object.assign(e,c);customElements.define(t,class extends a{constructor(){super()}init(){this.innerHTML=n(this.originalText())}})}o({render:(s,a={})=>{const{wrapOne:c}=Object.assign({},i,a);return function(e,t){const n=e.split("\n\n");return 1!==n.length||t?n.map((e=>{return`<${t="p"}>${e.trim()}</${t}>`;var t})).join("\n"):e.trim()}(function(e){return e.replace(/^\s*\n/gm,"\n").replace(/^\n+/,"").replace(/\n+$/,"").replace(/\n{3,}/g,"\n\n")}(s.replace("<","&lt;").replace(n,"").replace(/\\\//g,"0").replace(/\\\|/g,"1").replace(r,(function(n,r,i,s,a,c,o){if(e.includes(r)){const e=function(e,n){if(!n)return"";const r=/[a-z-]+="/.test(n);if(r)return n;{const[r,...i]=t[e];if(i){const e=n.trim().replace(/\s{2,}/g," ").split(r);return i.map(((t,n)=>e[n]?`${t}="${e[n]}"`:null)).filter((e=>e)).join(" ")}return""}}(r,c),n=/class\s*="/.test(e)?e:[s?`class="${s}"`:"",e].join(" ").trim();return`<${r}${""===n?"":" "+n}>${o.trim()}</${r}>`}return n})).replace(/\x010/g,"&#x2F;").replace(/\x011/g,"&#124;")),c)}});export{o as define};
